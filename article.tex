\RequirePackage[l2tabu,orthodox]{nag}
\documentclass[a4paper]{article}
\bibliographystyle{plain}

\pdfoutput=1

\usepackage{rwd-drafting}

\input{preamble.tex}
%%% some diagrams we won;t need in this papaer
%\input{tikzpreamble.tex}
%\input{quantumcircuits.tex}

\input{front-matter.tex}




\begin{document}
% For article.cls abstract goes here 
% other classes may have it in front-matter
\maketitle
\input{abstract.tex}


\section{Introduction}
\label{sec:intro}

\section{Mathematical Preliminaries}
\label{sec:prelim}

We assume that the reader is familiar with the notion of symmetric
monoidal category; a standard reference is
\cite{MacLane:CatsWM:1971}.  

\begin{definition}\label{def:PROP}
  A \emph{PROP} is strict symmetric monoidal category whose objects
  are the natural numbers, and where the action of the tensor product on
  objects is given by addition.
\end{definition}

PROPs have been used to formalise many algebraic structures
\cite{Lack:2004sf}, however our interest here is to formalise a
general notion of \emph{circuit} as a free PROP over a certain set of
gates.

\begin{example}  \label{ex:boolean-circs}
  TODO -- boolean circuits
\end{example}

\begin{example}  \label{ex:quantum-circs}
  TODO -- quanutm circuits
\end{example}

\begin{example}  \label{ex:zx-calculus}
  TODO -- zx-calculus
\end{example}

\noindent
Note that all of these examples usually include an equational theory.
We will don't include these equations in the  definition since we will
model them as higher dimensional arrows.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        2-CATEGORY DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{definition}  \label{def:strict-two-cat}
A \emph{strict} 2-category \catC is a category \emph{enriched over
  \textbf{Cat}}, the category of categories, \emph{viz:}
\begin{itemize}
\item A category \catC, whose objects and arrows are known as
  0-cells and 1-cells respectively.
\item For every pair of objects $A$ and $B$, we have a
  category $\catC(A, B)$, whose arrows are known as 2-cells.
\item For 2-cells $\alpha : f \Rightarrow g$ and $\beta : g
  \Rightarrow h$ in $\catC(A,B)$ their (vertical) composite is denoted
  $\beta\bullet\alpha : f \Rightarrow h$.
\item For every 1-cell $f:A\to B$ we denote its identity 2-cell by
  $Id_f:f \Rightarrow f$.
\item For all 0-cells $a$, $b$, $c$ a bifunctor $\circ: \catC(b, c)
  \times \catC(a, b) \to \catC(a, c)$ called \emph{horizontal
    composition} of 2-cells.
\end{itemize}
\REM{Need here the name for a 2-cat with all 2-cells invertible;  the
  term 2-groupoid refers to the case where both 1- and 2-cells are
  invertible.}
\end{definition}

\noindent
In the following we'll always write $A, B, C$ for \emph{0-cells}, $f,
g, h$ for \emph{1-cells} and $\alpha$, $\beta$, $\gamma$ for
\emph{2-cells}.

\begin{definition}
  \label{def:two-functor}
  DEFINITION OF 2-FUNCTOR here
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        MONOIDAL 2-CATEGORY DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{definition}\label{def:monoidal-two-cat}
A \emph{strict} monoidal 2-category $(\catC, \otimes)$ is a strict
2-category with
\REM{Is this \emph{required}?  Doesn't it follow from the  definition
  of bifunctor?  (It does in the 1-category case, so it should do
  here!)}
\begin{itemize}
\item a 2-bifunctor $\otimes: \catC \times \catC \to \catC$ such that
  on 2-cells $r, s, t, u$
\[
(r \otimes s) \circ (t \otimes u) = (r \circ t) \otimes (s \circ u)
\]
\REM{This definition doesn't quite work without the additoin type
  information on the 2-cells}
\end{itemize}
\end{definition}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        INTERCHANGE LAW REMARK        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{remark}[Interchange law]
Since $\circ$ and $\otimes$ are bifunctorial, we have the following
interchange equations for all 0-cells $A, B \in \catC$ and all 2-cells $r, s,
    t, u \in \catC(A, B)$
\begin{align}
(r \circ s) \bullet (t \circ u) &= (r \bullet t) \circ (s \bullet u) \\
(r \otimes s) \bullet (t \otimes u) &= (r \bullet t) \otimes (s \bullet u)
\end{align}
\end{remark}

\section{Rewriting systems as 2-PROPS}
\label{sec:rewriting}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        REWRITING SYSTEM DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{definition}
A \emph{groupoid} is a category where morphisms are invertible.
Let's define the following strict monoidal 2-groupoid \catC

\begin{itemize}
\item 0-cells are natural number $\mathbb{N}$
\item 1-cells are quantum circuits freely generated by $\circ$, $\otimes$ and
    $\{f_i\}_i$, a set of quantum circuits
\item 2-cells are quantum circuit transformations freely generated by $\circ$,
    $\otimes$ and $\{r_i\}_i$, a set of ransformations, such that $\forall r: f
    \Rightarrow g \in \{r_i\}_i, \exists r^{-1}: g \Rightarrow f \in \{r_i\}_i$
\[
r \circ r^{-1} = id_f
\]
\item the vertical composition is the usual transformations composition
\item the horizontal composition is the usual circuits composition
\item the 2-bifunctor is
\begin{itemize}
\item on 0-cell, $a \otimes b = a + b$
\item on $\catC(a, b)$, a functor $\catC(a, b) \otimes C(a', b') \to C(a + a',
    b + b')$
\end{itemize}
\end{itemize}
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        REWRITING SYSTEM PROPOSITION 1        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{proposition}
For all transformation $r: f \Rightarrow g$, $r$ can be writen
\[
r = r_1 \bullet r_2 \bullet r_3 \bullet \cdots \bullet r_i
\]

\begin{proof}
We'll prove it by induction of the size of the transformation using the
    properties of the bifunctors.
With a single transformation, we already have
\[
r = r_1
\]
For the inductive step let's assume $r$ is
\[
r = r_1 \bullet r_2 \bullet r_3 \bullet \cdots \bullet s
\]
If $s$ is such that
\[
s = (s_1 \bullet s_2) \circ (s_3 \bullet s_4)
\]
Then using the interchange law we can write
\[
s = (s_1 \circ s_3) \bullet (s_2 \circ s_4)
\]
So we have 
\begin{align}
r &= r_1 \bullet r_2 \bullet r_3 \bullet \cdots \bullet (s_1 \circ s_3) \bullet
    (s_2 \circ s_4) \cr
r &= r_1 \bullet r_2 \bullet r_3 \bullet \cdots \bullet r_{i - 1} \bullet r_i
\end{align}
Otherwise we can always add an identity transformation to get the interchange
    law.
\begin{align}
s_1 \circ (s_3 \bullet s_4) &\Rightarrow (s_1 \bullet id) \circ (s_2 \bullet
    s_3) \cr
(s_1 \bullet s_2) \circ s_3 &\Rightarrow (s_1 \bullet s_2) \circ (id \bullet
    s_3)
\end{align}
The same is true with
\[
s = (s_1 \bullet s_2) \otimes (s_3 \bullet s_4)
\]
\end{proof}
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        REWRITING SYSTEM PROPOSITION 2        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{proposition}
For all transformation $r: f \Rightarrow g$, $r$ can be writen
\begin{align}
r &= r_1 \circ r_2 \circ r_3 \circ \cdots \circ r_j \cr
r &= r_1 \otimes r_2 \otimes r_3 \otimes \cdots \otimes r_k
\end{align}

\begin{proof}
The proof is the same but this time we have to use
\[
(r \otimes s) \circ (t \otimes u) = (r \circ t) \otimes (s \circ u)
\]
\end{proof}
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        REWRITING SYSTEM PROPOSITION 2 COROLLARY        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{corollary}
For all transformation $r: f \Rightarrow g$, $r$ can be writen
\[
r = r_1 \bullet r_2 \bullet r_3 \bullet \cdots \bullet r_i
\]
Such that for all $i$
\[
r_i = r_{i, 1} \circ r_{i, 2} \circ r_{i, 3} \circ \cdots \circ r_{i, j}
\]
and for all $j$
\[
r_{i, j} = \bigotimes_k^l r_{i, j, k}
\]
a tensor products of transformations.
\end{corollary}

\section{Quantale Enriched Categories}
\label{sec:quant-enrich-categ}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        QUANTALE DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{definition}[Quantale $\mathbb{Q}$]
A quantale is a \emph{lattice} with a binary operator such that for all
    elements of the lattice $x, y$ and $\{x_i\}_i, \{y_i\}_i$
\begin{align}
x \oplus \bigvee y_i &= \bigvee x \oplus y_i \cr
\left(\bigvee x_i\right) \oplus y &= \bigvee x_i \oplus y
\end{align}

We require that for all $x$, it exist $x^{-1}$ such that
\begin{align}
x \oplus x^{-1} &= e \cr
x^{-1} \oplus x &= e
\end{align}

Such a quantale can be seen as a monoidal category over a \emph{group}.
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        Q-ENRICHED CATEGORY DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{definition}[$\mathbb{Q}$-enriched category]
A $\mathbb{Q}$-enriched category \catE is

\begin{itemize}
\item A set of objects
\item For all objects $(a, b)$, $\catE(a, b) \in \mathbb{Q}$
\end{itemize}

such that for all object $a$
\[
e \succeq \catE(a, a)
\]
for all objects (a, b, c)
\[
\catE(b, c) \oplus \catE(a, b) \succeq \catE(a, c)
\]
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        MONOIDAL Q-ENRICHED CATEGORY DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{definition}[Monoidal $\mathbb{Q}$-enriched category]
$(E, \otimes)$ is strictly monoidal if
\[
\catE(a, b) \oplus \catE(a', b') \succeq \catE(a \otimes a', b \otimes b')
\]
and symmetric if
\[
e \succeq \catE(a \otimes b, b \otimes a)
\]
\end{definition}



\section{$\mathbb{Q}$-valued rewriting systems}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM DEFINITION        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{definition}[$\catC(a, b)$ to $\mathbb{Q}$ homomorphism]
Let's define the following homomorphism $F$ from $\catC(a, b)$ to $\mathbb{Q}$.
    For all $f: a \to b \in \{f_i\}_i$
\[
V(f) \in \mathbb{Q}
\]
For all $r: f \Rightarrow g \in \{r_i\}_i$
\[
V(r) = V(f) \oplus V(g)^{-1}
\]

On 1-cells
\begin{align}
V(f \circ g) &\preceq V(f) \oplus V(g) \cr
V(f \otimes g) &\preceq V(f) \oplus V(g)
\end{align}

On 2-cells
\begin{align}
V(r \circ s) &= V(r) \oplus V(s) \cr
V(r \otimes s) &= V(r) \oplus V(s) \cr
V(r \bullet s) &= V(r) \oplus V(s)
\end{align}
\end{definition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM REMARK        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{remark}
Note that because
\[
V(r: f \Rightarrow g) = V(f) \oplus V(g)^{-1}
\]
then
\begin{align}
V(r: f \Rightarrow f) &= V(f) \oplus V(f)^{-1} \cr
&= e
\end{align}
that is
\begin{align}
\forall f, V(id_f) = e
\end{align}
\end{remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM PROPOSITION 1        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{proposition}
Given two transformations $r, s: f \Rightarrow g$, then $V(r) = V(s)$.

\begin{proof}
The set of all possible transformation is freely generated by $\{r_i\}_i$,
    $\bullet$, $\circ$ and $\otimes$ so both $r$ and $s$ can be written
\begin{align}
r &= r_1 \odot r_2 \odot r_3 \odot \cdots \odot r_n \cr
s &= s_1 \odot s_2 \odot s_3 \odot \cdots \odot s_m
\end{align}
with $\odot \in \{\bullet, \circ, \otimes\}$ and for all i
\begin{align}
r_i &\in \{f_i\}_i \cr
s_i &\in \{f_i\}_i
\end{align}
If $n = 1$ then $r \in \{f_i\}_i$, so $V(r) = V(f) \oplus V(g)^{-1}$.
Otherwise
\begin{align}
V(r) &= V(r_1 \odot r_2 \odot \cdots \odot r_n) \cr
&= V(r_1) \oplus V(r_2) \oplus \cdots \oplus V(r_n) \cr
&= V(f \Rightarrow h_1) \oplus V(h_1 \Rightarrow h_2) \oplus \cdots \oplus
    V(h_n \Rightarrow g) \cr
&= V(f) \oplus V(h_1)^{-1} \oplus V(h_1) \oplus V(h_2)^{-1} \oplus \cdots
    \oplus V(h_n) \oplus V(g)^{-1}
\end{align}
A easy inductive proof can show us that
\[
V(f) \oplus V(h_1)^{-1} \oplus V(h_1) \oplus V(h_2)^{-1} \oplus V(h_2) \oplus
    \cdots \oplus V(h_n) \oplus V(g)^{-1} = V(f) \oplus V(g)^{-1}
\]
The same is true for $s$, so
\[
V(r) = V(s) = V(f) \oplus V(g)^{-1}
\]
\end{proof}
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM PROPOSITION 1 COROLLARY        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{corollary}
For all transformations $r: f \Rightarrow g$, then $V(r) = V(f) \oplus
    V(g)^{-1}$.
Note that the definition of $F$ gives that only for $r \in \{f_i\}_i$.
\end{corollary}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM PROPOSITION 2        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{proposition}
The following category $\catC(\mathbb{Q})$ is a $\mathbb{Q}$-category
\begin{itemize}
\item A set of objects which are the 1-cells of $\catC$
\item For all objects $(f, g)$
\end{itemize}
\[
\catE(f, g) = \begin{cases} {\rm if~} f \Rightarrow g \in \catC, &V(f
    \Rightarrow g) \cr {\rm otherwise~} &\top \end{cases}
\]
With $\top \in Q$ such that for all $x \in \mathbb{Q}$
\[
x \preceq \top
\]

\begin{proof}
For all 1-cells $(f, g)$, if it exists a unique transformation $f \Rightarrow
    g$, then
\begin{align}
\catE(f, g) &= V(f \Rightarrow g) \in \mathbb{Q} \cr
&= V(f) \oplus V(g)^{-1}
\end{align}
otherwise we already have $\catE(f, g) = \top \in \mathbb{Q}$.
For all 1-cell $f$, we know that there is a identity transformation $f
    \Rightarrow f$ and
\begin{align}
\catE(f, f) &= V(id_f) \cr
&= V(f \Rightarrow f)\cr
&= V(f) \oplus V(f)^{-1} \cr
&= e
\end{align}
Finally, for all 1-cells $(f, g, h)$ such that there exists $r: f \Rightarrow
    g$ and $s: g \Rightarrow h$ in $\catC$, then the homomorphism $F$ give us
\begin{align}
\catE(f, h) &= V(f \Rightarrow h) \cr
&= V(s\circ r) \cr
&= V(s) \oplus V(r) \cr
&= V(g \Rightarrow h) \oplus V(f \Rightarrow g) \cr
&= \catE(g, h) \oplus \catE(f, g)
\end{align}
If either $r$ or $s$ doesn't exists in $\catC$ then
\[
\catE(b, c) \oplus \catE(a, b) \succeq \catE(a, c)
\]
become
\[\begin{matrix}
&\catE(b, c) \oplus \top &\succeq \top \cr
{\rm or~} &\top \oplus \catE(a, b) &\succeq \top \cr
{\rm or~} &\top \oplus \top &\succeq \top
\end{matrix}\]
which is still true.
\end{proof}
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM PROPOSITION 3        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{proposition}
$\catC(\mathbb{Q})$ is strictly symmetric monoidal with $\otimes$, the
    2-functor of $\catC$.

\begin{proof}
The monoidal structure is immediate using the fact that
\[
V(r) \oplus V(s) \succeq V(r \otimes s)
\]
that is
\[
V(r: f \Rightarrow g) \oplus V(s: f' \Rightarrow g') = V(r \otimes s: f \otimes
    f' \Rightarrow g \otimes g')
\]
so
\[
\catE(f, g) \oplus \catE(f', g') = \catE(f \otimes f', g \otimes g')
\]
For the symmetry, we use the fact that $V(f \Rightarrow g) \oplus V(g
    \Rightarrow f) = e$
\begin{align}
\catE(f \otimes g, g \otimes f) &= V(f \otimes g \Rightarrow g \otimes g) \cr
&= V(f \Rightarrow g \otimes g \Rightarrow f) \cr
&\preceq V(f \Rightarrow g) \oplus V(g \Rightarrow f) \cr
&= V(f) \oplus V(g)^{-1} \oplus V(g) \oplus V(f)^{-1} \cr
&= e
\end{align}
\end{proof}
\end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%        HOMOMORPHISM PROPOSITION 3 COROLLARY        %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{corollary}
Given $s: f \Rightarrow g$ a transformation, and $s^{-1}: g \Rightarrow f$ the
    inverse transformation
\[
V(s \otimes s^{-1}) = e
\]
\end{corollary}


\section{Conclusions and further work}
\label{sec:conclusion}



\small
\bibliography{all}


\end{document}
